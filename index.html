<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content='{sdtmval} provides a set of tools to assist statistical programmers 
    in validating Study Data Tabulation Model (SDTM) data sets. Statistical 
    programmers are required to validate that a SDTM data set domain has been 
    programmed correctly, per the SDTM Implementation Guide (SDTMIG), study 
    specification, and study protocol using a process called double programming. 
    Double programming involves two different programmers idependently 
    converting the raw electronic data cut (EDC) data in a SDTM domain data 
    table and comparing the results to ensure accurate standardization of the 
    data. One of these attempts is termed "production" and the other 
    "validation". Generally, production runs are the official programs for 
    submittals and these are written in SAS. Validation runs can be programmed 
    in another language, in this case R. '>
<title>Utilities for SDTM validation • sdtmval</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Utilities for SDTM validation">
<meta property="og:description" content='{sdtmval} provides a set of tools to assist statistical programmers 
    in validating Study Data Tabulation Model (SDTM) data sets. Statistical 
    programmers are required to validate that a SDTM data set domain has been 
    programmed correctly, per the SDTM Implementation Guide (SDTMIG), study 
    specification, and study protocol using a process called double programming. 
    Double programming involves two different programmers idependently 
    converting the raw electronic data cut (EDC) data in a SDTM domain data 
    table and comparing the results to ensure accurate standardization of the 
    data. One of these attempts is termed "production" and the other 
    "validation". Generally, production runs are the official programs for 
    submittals and these are written in SAS. Validation runs can be programmed 
    in another language, in this case R. '>
<meta property="og:image" content="https://skgithub14.github.io/sdtmval/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">sdtmval</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/skgithub14/sdtmval/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="sdtmval-">sdtmval 
<a class="anchor" aria-label="anchor" href="#sdtmval-"></a>
</h1>
</div>
<!-- badges: start -->

<p>The goal of {sdtmval} is to provide a set of tools to assist statistical programmers in validating Study Data Tabulation Model (SDTM) data sets.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of {sdtmval} from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"skgithub14/sdtmval"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="a-typical-work-flow-example">A typical work flow example<a class="anchor" aria-label="anchor" href="#a-typical-work-flow-example"></a>
</h2>
<p>In this example work flow, we will load in a raw EDC table and transform it into a SDTM domain table. We will use the fake domain is ‘XX’.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set-up</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/skgithub14/sdtmval" class="external-link">sdtmval</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span></span>
<span><span class="va">domain</span> <span class="op">&lt;-</span> <span class="st">"XX"</span></span>
<span><span class="va">work_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"sdtmval"</span><span class="op">)</span></span></code></pre></div>
<p>The majority of the data needed is in the EDC form/table xx.csv. There is also visit date data in the raw EDC form/table vd.csv and study start and end dates by subject in the production SDTM table dm.sas7dbat. We will start by importing all of the data we need using the two functions <code><a href="reference/read_edc_tbls.html">read_edc_tbls()</a></code> and <code><a href="reference/read_sdtm_tbls.html">read_sdtm_tbls()</a></code>. The main difference between these two functions is that the first reads in .csv files and the second reads in .sas7dbat files.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read in EDC tables from the forms XX and VD</span></span>
<span><span class="va">edc_tbls</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xx"</span>, <span class="st">"vd"</span><span class="op">)</span></span>
<span><span class="va">edc_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_edc_tbls.html">read_edc_tbls</a></span><span class="op">(</span><span class="va">edc_tbls</span>, dir <span class="op">=</span> <span class="va">work_dir</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># read in SDTM domain DM</span></span>
<span><span class="va">sdtm_tbls</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dm"</span><span class="op">)</span></span>
<span><span class="va">sdtm_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_sdtm_tbls.html">read_sdtm_tbls</a></span><span class="op">(</span><span class="va">sdtm_tbls</span>, dir <span class="op">=</span> <span class="va">work_dir</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">edc_dat</span><span class="op">$</span><span class="va">xx</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">STUDYID</th>
<th align="left">USUBJID</th>
<th align="left">VISIT</th>
<th align="left">XXTESTCD</th>
<th align="left">XXORRES</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 1</td>
<td align="left">T1</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 2</td>
<td align="left">T1</td>
<td align="left">0</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 3</td>
<td align="left">T1</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 3</td>
<td align="left">T2</td>
<td align="left">100</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 4</td>
<td align="left">T3</td>
<td align="left">PASS</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 1</td>
<td align="left">T1</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 2</td>
<td align="left">T1</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 3</td>
<td align="left">T1</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 3</td>
<td align="left">T2</td>
<td align="left">200</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 4</td>
<td align="left">T3</td>
<td align="left">FAIL</td>
</tr>
</tbody>
</table>
<p>The next thing we will do is get the relevant information from the SDTM specification for the study. The next set of functions assumes there is a .xlsx file which contains the sheets: ‘Datasets’, ‘XX’, and ‘Codelists’. ‘Datasets’ contains the key variables by domain, ‘XX’ gives the variable information for the XX domain, and ‘Codelists’ provides a table of coded/decoded values by variable.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">spec_fname</span> <span class="op">&lt;-</span> <span class="st">"spec.xlsx"</span></span>
<span><span class="va">spec</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_data_spec.html">get_data_spec</a></span><span class="op">(</span>domain <span class="op">=</span> <span class="va">domain</span>, dir <span class="op">=</span> <span class="va">work_dir</span>, filename <span class="op">=</span> <span class="va">spec_fname</span><span class="op">)</span></span>
<span><span class="va">key_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_key_vars.html">get_key_vars</a></span><span class="op">(</span>domain <span class="op">=</span> <span class="va">domain</span>, dir <span class="op">=</span> <span class="va">work_dir</span>, filename <span class="op">=</span> <span class="va">spec_fname</span><span class="op">)</span></span>
<span><span class="va">codelists</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_codelist.html">get_codelist</a></span><span class="op">(</span>domain <span class="op">=</span> <span class="va">domain</span>, dir <span class="op">=</span> <span class="va">work_dir</span>, filename <span class="op">=</span> <span class="va">spec_fname</span><span class="op">)</span></span></code></pre></div>
<p>Now we will begin creating the SDTM XX domain using the EDC XX form as the basis. First, it needs some pre-processing because there is extra white space in some of the variable which needs trimming. We also want to turn all NA equivalent values to <code>NA</code> for the entire data set for consistency (in a step near the end these will all be converted back to <code>""</code>).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sdtm_xx1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/trim_and_make_blanks_NA.html">trim_and_make_blanks_NA</a></span><span class="op">(</span><span class="va">edc_dat</span><span class="op">$</span><span class="va">xx</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">sdtm_xx1</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">STUDYID</th>
<th align="left">USUBJID</th>
<th align="left">VISIT</th>
<th align="left">XXTESTCD</th>
<th align="left">XXORRES</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 1</td>
<td align="left">T1</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 2</td>
<td align="left">T1</td>
<td align="left">0</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 3</td>
<td align="left">T1</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 3</td>
<td align="left">T2</td>
<td align="left">100</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 4</td>
<td align="left">T3</td>
<td align="left">PASS</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 1</td>
<td align="left">T1</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 2</td>
<td align="left">T1</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 3</td>
<td align="left">T1</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 3</td>
<td align="left">T2</td>
<td align="left">200</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 4</td>
<td align="left">T3</td>
<td align="left">FAIL</td>
</tr>
</tbody>
</table>
<p>In order to calculate the timing variables XXBLFL, EPOCH, and XXDY, we need to the visit dates from the EDC VD table and the study start/end dates by subject from the SDTM DM table.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sdtm_xx2</span> <span class="op">&lt;-</span> <span class="va">sdtm_xx1</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># get the VISITDTC column from the EDC VD form</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">edc_dat</span><span class="op">$</span><span class="va">vd</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"VISIT"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>XXDTC <span class="op">=</span> <span class="va">VISITDTC</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># get the </span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">sdtm_dat</span><span class="op">$</span><span class="va">dm</span>, by <span class="op">=</span> <span class="st">"USUBJID"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">sdtm_xx2</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="9%">
<col width="11%">
<col width="9%">
<col width="10%">
<col width="9%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left">STUDYID</th>
<th align="left">USUBJID</th>
<th align="left">VISIT</th>
<th align="left">XXTESTCD</th>
<th align="left">XXORRES</th>
<th align="left">XXDTC</th>
<th align="left">RFSTDTC</th>
<th align="left">RFXSTDTC</th>
<th align="left">RFXENDTC</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 1</td>
<td align="left">T1</td>
<td align="left">1</td>
<td align="left">2023-08-01</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-03</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 2</td>
<td align="left">T1</td>
<td align="left">0</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-03</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 3</td>
<td align="left">T1</td>
<td align="left">2</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-03</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 3</td>
<td align="left">T2</td>
<td align="left">100</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-03</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 4</td>
<td align="left">T3</td>
<td align="left">PASS</td>
<td align="left">2023-08-04</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-03</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 1</td>
<td align="left">T1</td>
<td align="left">1</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-04</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 2</td>
<td align="left">T1</td>
<td align="left">NA</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-04</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 3</td>
<td align="left">T1</td>
<td align="left">2</td>
<td align="left">2023-08-04</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-04</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 3</td>
<td align="left">T2</td>
<td align="left">200</td>
<td align="left">2023-08-04</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-04</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 4</td>
<td align="left">T3</td>
<td align="left">FAIL</td>
<td align="left">2023-08-05</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-04</td>
</tr>
</tbody>
</table>
<p>Now, we can proceed with calculating those timing variables:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sdtm_xx3</span> <span class="op">&lt;-</span> <span class="va">sdtm_xx2</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># XXBLFL</span></span>
<span>  <span class="fu"><a href="reference/create_BLFL.html">create_BLFL</a></span><span class="op">(</span>sort_date <span class="op">=</span> <span class="st">"XXDTC"</span>,</span>
<span>              domain <span class="op">=</span> <span class="va">domain</span>,</span>
<span>              grouping_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"XXTESTCD"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># EPOCH</span></span>
<span>  <span class="fu"><a href="reference/create_EPOCH.html">create_EPOCH</a></span><span class="op">(</span>date_col <span class="op">=</span> <span class="st">"XXDTC"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># XXDY</span></span>
<span>  <span class="fu"><a href="reference/calc_DY.html">calc_DY</a></span><span class="op">(</span>DY_col <span class="op">=</span> <span class="st">"XXDY"</span>,</span>
<span>          DTC_col <span class="op">=</span> <span class="st">"XXDTC"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">sdtm_xx3</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="7%">
<col width="9%">
<col width="7%">
<col width="8%">
<col width="7%">
<col width="9%">
<col width="9%">
<col width="9%">
<col width="9%">
<col width="6%">
<col width="9%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left">STUDYID</th>
<th align="left">USUBJID</th>
<th align="left">VISIT</th>
<th align="left">XXTESTCD</th>
<th align="left">XXORRES</th>
<th align="left">XXDTC</th>
<th align="left">RFSTDTC</th>
<th align="left">RFXSTDTC</th>
<th align="left">RFXENDTC</th>
<th align="left">XXBLFL</th>
<th align="left">EPOCH</th>
<th align="right">XXDY</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 1</td>
<td align="left">T1</td>
<td align="left">1</td>
<td align="left">2023-08-01</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-03</td>
<td align="left">NA</td>
<td align="left">SCREENING</td>
<td align="right">-1</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 2</td>
<td align="left">T1</td>
<td align="left">0</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-03</td>
<td align="left">Y</td>
<td align="left">TREATMENT</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 3</td>
<td align="left">T1</td>
<td align="left">2</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-03</td>
<td align="left">NA</td>
<td align="left">TREATMENT</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 3</td>
<td align="left">T2</td>
<td align="left">100</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-03</td>
<td align="left">NA</td>
<td align="left">TREATMENT</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 1</td>
<td align="left">Visit 4</td>
<td align="left">T3</td>
<td align="left">PASS</td>
<td align="left">2023-08-04</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-03</td>
<td align="left">NA</td>
<td align="left">FOLLOW-UP</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 1</td>
<td align="left">T1</td>
<td align="left">1</td>
<td align="left">2023-08-02</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-04</td>
<td align="left">Y</td>
<td align="left">SCREENING</td>
<td align="right">-1</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 2</td>
<td align="left">T1</td>
<td align="left">NA</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-04</td>
<td align="left">NA</td>
<td align="left">TREATMENT</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 3</td>
<td align="left">T1</td>
<td align="left">2</td>
<td align="left">2023-08-04</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-04</td>
<td align="left">NA</td>
<td align="left">TREATMENT</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 3</td>
<td align="left">T2</td>
<td align="left">200</td>
<td align="left">2023-08-04</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-04</td>
<td align="left">NA</td>
<td align="left">TREATMENT</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">Study 1</td>
<td align="left">Subject 2</td>
<td align="left">Visit 4</td>
<td align="left">T3</td>
<td align="left">FAIL</td>
<td align="left">2023-08-05</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-03</td>
<td align="left">2023-08-04</td>
<td align="left">NA</td>
<td align="left">FOLLOW-UP</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/skgithub14/sdtmval/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/skgithub14/sdtmval/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing sdtmval</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Stephen Knapp <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5101-4555" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/skgithub14/sdtmval/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/skgithub14/sdtmval/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/skgithub14/sdtmval?branch=master" class="external-link"><img src="https://codecov.io/gh/skgithub14/sdtmval/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Stephen Knapp.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
